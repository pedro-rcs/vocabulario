<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>100 Useful Travel Phrases</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f7fcf9;
    color: #264d26;
    padding: 1rem 2rem;
  }

  h2 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    color: #3a7d44;
    font-weight: 700;
    border-left: 6px solid #a4d4ae;
    padding-left: 0.5rem;
    font-size: 1.6rem;

    background: #f5f5f5;
    padding: 8px 12px;
    border-radius: 6px;
    transition: background 0.25s, transform 0.15s;

    margin: 8px 0;
  }

h2:hover {
  background: #e2e2e2;
  transform: translateX(3px);
}

h2::after {
  content: "▼";
  font-size: 0.8em;
  margin-left: 6px;
  display: inline-block; /* necessário para permitir rotação */
  transition: transform 0.25s;
}

h2.open::after {
  transform: rotate(180deg); /* vira pra cima */
}
  .table-wrapper {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-bottom: 3rem;
  }

  table {
    width: 100%;
    min-width: 700px; /* força scroll horizontal se viewport menor */
    border-collapse: separate;
    border-spacing: 0;
    box-shadow: 0 2px 8px rgba(58, 125, 68, 0.15);
    border-radius: 8px;
    overflow: hidden;
    background-color: #f0faf0;
  }

  th, td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid #d6efd6;
  }

  th {
    background-color: #c9eacc; /* verde clarinho */
    color: #1b4516;
    font-weight: 600;
    user-select: none;
  }

  td {
    cursor: pointer;
    transition: background-color 0.3s ease;
    background-color: #ffffff; /* fundo branco */
  }

  td:hover {
    background-color: #d9f1d9; /* verde suave no hover */
  }

  tr:last-child td {
    border-bottom: none;
  }
</style>
</head>
<body>

<!-- textarea escondido contendo o CSV -->

<div id="output"></div>

<script>
// Função simples para parsear CSV
function parseCSV(text) {
  const lines = text.trim().split('\n');
  const result = lines.map(line => {
    const values = [];
    let insideQuotes = false;
    let value = '';
    for (let char of line) {
      if (char === '"') insideQuotes = !insideQuotes;
      else if (char === ',' && !insideQuotes) {
        values.push(value);
        value = '';
      } else {
        value += char;
      }
    }
    values.push(value);
    return values;
  });
  return result;
}

function buildTables(data) {
  const headers = data[0].slice(1);
  const grouped = {};

  for (let i = 1; i < data.length; i++) {
    const row = data[i];
    const categoria = row[0];
    if (!grouped[categoria]) grouped[categoria] = [];
    grouped[categoria].push(row.slice(1));
  }

  const container = document.getElementById('output');
  container.innerHTML = '';

  // Exemplo simplificado do mapa de áudio para Greetings (complete conforme seus arquivos)
  const audioMap = {
    "Greetings": {
      0: "Greetings_1.mp3",
      1: "Greetings_2.mp3",
      2: "Greetings_3.mp3",
      3: "Greetings_4.mp3",
      4: "Greetings_5.mp3",
      5: "Greetings_6.mp3",
      6: "Greetings_7.mp3",
      7: "Greetings_8.mp3",
      8: "Greetings_9.mp3",
      9: "Greetings_10.mp3"
    },
    "Essentials of Travel": {
      0: "Essential Travel_11.mp3",
      1: "Essential Travel_12.mp3",
      2: "Essential Travel_13.mp3",
      3: "Essentials of Travel_14.mp3",
      4: "Essential Travel_15.mp3",
      5: "Essentials of Travel_16.mp3",
      6: "Essentials of Travel_17.mp3",
      7: "Essentials of Travel_18.mp3",
      8: "Essential Travel_19.mp3",
      9: "Essential Travel_20.mp3"
    },
    "Food and Drink": {
      0: "Food and Drink_21.mp3",
      1: "Food and Drink_22.mp3",
      2: "Food and Drink_23.mp3",
      3: "Food and Drink_24.mp3",
      4: "Food and Drink_25.mp3",
      5: "Food and Drink_26.mp3",
      6: "Food and Drink_27.mp3",
      7: "Food and Drink_28.mp3",
      8: "Food and Drink_29.mp3",
      9: "Food and Drink_30.mp3"
    },
    "Shopping": {
      0: "Shopping_31.mp3",
      1: "Shopping_32.mp3",
      2: "Shopping_33.mp3",
      3: "Shopping_34.mp3",
      4: "Shopping_35.mp3",
      5: "Shopping_36.mp3",
      6: "Shopping_37.mp3",
      7: "Shopping_38.mp3",
      8: "Shopping_39.mp3",
      9: "Shopping_40.mp3"
    },
    "Directions": {
      0: "Directions_41.mp3",
      1: "Directions_42.mp3",
      2: "Directions_43.mp3",
      3: "Directions_44.mp3",
      4: "Directions_45.mp3",
      5: "Directions_46.mp3",
      6: "Directions_47.mp3",
      7: "Directions_48.mp3",
      8: "Directions_49.mp3",
      9: "Directions_50.mp3"
    },
    "Transport": {
      0: "Transport_51.mp3",
      1: "Transport_52.mp3",
      2: "Transport_53.mp3",
      3: "Transport_54.mp3",
      4: "Transport_55.mp3",
      5: "Transport_56.mp3",
      6: "Transport_57.mp3",
      7: "Transport_58.mp3",
      8: "Transport_59.mp3",
      9: "Transport_60.mp3"
    },
    "Hotel and Hosting": {
      0: "Hotel and Hosting_61.mp3",
      1: "Hotel and Hosting_62.mp3",
      2: "Hotel and Lodging_63.mp3",
      3: "Hotel and Hosting_64.mp3",
      4: "Hotel and Lodging_65.mp3",
      5: "Hotel and Lodging_66.mp3",
      6: "Hotel and Lodging_67.mp3",
      7: "Hotel and Lodging_68.mp3",
      8: "Hotel and Lodging_69.mp3",
      9: "Hotel and Hosting_70.mp3"
    },
    "Emergencies": {
      0: "Emergencies_71.mp3",
      1: "Emergencies_72.mp3",
      2: "Emergencies_73.mp3",
      3: "Emergencies_74.mp3",
      4: "Emergencies_75.mp3",
      5: "Emergencies_76.mp3",
      6: "Emergencies_77.mp3",
      7: "Emergencies_78.mp3",
      8: "Emergencies_79.mp3",
      9: "Emergencies_80.mp3"
    },
    "Health": {
      0: "Health_81.mp3",
      1: "Health_82.mp3",
      2: "Health_83.mp3",
      3: "Health_84.mp3",
      4: "Health_85.mp3",
      5: "Health_86.mp3",
      6: "Health_87.mp3",
      7: "Health_88.mp3",
      8: "Health_89.mp3",
      9: "Health_90.mp3"
    },
    "Casual Conversation": {
      0: "Casual conversation_91.mp3",
      1: "Casual conversation_92.mp3",
      2: "Casual conversation_93.mp3",
      3: "Casual casuals_94.mp3",
      4: "Casual casuals_95.mp3",
      5: "Casual conversation_96.mp3",
      6: "Casual conversation_97.mp3",
      7: "Casual casuals_98.mp3",
      8: "Casual casuals_99.mp3",
      9: "Casual conversation_100.mp3"
    }
  };


  const h1 = document.createElement('h1');
  h1.textContent = '100 Useful Travel Phrases';
  container.appendChild(h1);

  for (const categoria in grouped) {
    const frases = grouped[categoria];

    const h2 = document.createElement('h2');
    h2.textContent = categoria;
    h2.style.cursor = 'pointer';
    h2.style.userSelect = 'none';
    container.appendChild(h2);

    const wrapper = document.createElement('div');
    wrapper.className = 'table-wrapper';
    wrapper.style.display = 'none'; // inicia escondido

    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const trHead = document.createElement('tr');

    headers.forEach(h => {
      const th = document.createElement('th');
      th.textContent = h;
      trHead.appendChild(th);
    });
    thead.appendChild(trHead);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    frases.forEach((frase, fraseIndex) => {
      const tr = document.createElement('tr');
      frase.forEach((texto, idx) => {
        const td = document.createElement('td');
        td.textContent = texto;
        td.style.cursor = 'pointer';

        td.addEventListener('click', () => {
          const idioma = headers[idx];
          const arquivoAudio = audioMap[categoria] && audioMap[categoria][fraseIndex];
          if (!arquivoAudio) {
            alert('Áudio não encontrado para esta frase.');
            return;
          }
          const audioPath = `${idioma}/${arquivoAudio}`;
          const audio = new Audio(audioPath);
          audio.play().catch(err => console.error('Erro ao tocar áudio:', err));
        });

        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);

    wrapper.appendChild(table);
    container.appendChild(wrapper);

    // Toggle de exibição
    h2.addEventListener('click', () => {
      wrapper.style.display = wrapper.style.display === 'none' ? 'block' : 'none';
      h2.classList.toggle('open');
    });
  }
}

// Idiomas disponíveis
const idiomas = ["English", "Portuguese", "Spanish", "French", "German", "Italian"];
const idiomaNomes = {
  "English": "English",
  "Portuguese": "Português",
  "Spanish": "Español",
  "French": "Français",
  "German": "Deutsch",
  "Italian": "Italiano"
};

// Criar div do seletor
const langSelector = document.createElement('div');
langSelector.id = 'langSelector';
langSelector.style.marginBottom = '12px';

// Criar botões dinamicamente
idiomas.forEach(idioma => {
  const btn = document.createElement('button');
  btn.dataset.lang = idioma;
  btn.textContent = idiomaNomes[idioma];
  btn.style.marginRight = '6px';
  btn.style.cursor = 'pointer';
  btn.style.padding = '6px 10px';
  btn.style.borderRadius = '5px';
  btn.style.border = '1px solid #ccc';
  btn.style.background = '#f5f5f5';
  btn.style.transition = 'background 0.2s';
  btn.addEventListener('mouseenter', () => btn.style.background = '#e2e2e2');
  btn.addEventListener('mouseleave', () => btn.style.background = '#f5f5f5');

  // Clique do botão troca idioma
  btn.addEventListener('click', () => updateCategoryTitles(idioma));

  langSelector.appendChild(btn);
});

// Inserir acima do container principal
const container = document.getElementById('output');
container.parentNode.insertBefore(langSelector, container);

fetch('dados.csv') // ou 'subpasta/data.csv' se estiver em uma subpasta
  .then(response => {
    if (!response.ok) throw new Error('CSV não encontrado');
    return response.text();
  })
  .then(csvText => {
    const data = parseCSV(csvText);
    buildTables(data);
  })
  .catch(err => console.error('Erro ao carregar CSV:', err));


//buildTables(data);
</script>

</body>
</html>
