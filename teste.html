<!-- textarea escondido contendo o CSV -->
<textarea id="csvData" style="display:none;">
Categoria,English,Portuguese,Spanish,French,German,Italian
Greetings,Hello,Olá,Hola,Bonjour,Hallo,Ciao
Greetings,Good morning,Bom dia,Buenos días,Bonjour,Guten Morgen,Buongiorno
Greetings,Good afternoon,Boa tarde,Buenas tardes,Bon après-midi,Guten Tag,Buon pomeriggio
Greetings,Good evening,Boa noite,Buenas noches,Bonsoir,Guten Abend,Buonasera
Greetings,How are you?,Como vai?,¿Cómo está?,Comment ça va ?,Wie geht’s?,Come stai?
Greetings,Nice to meet you,Muito prazer,Mucho gusto,Enchanté,Freut mich,Piacere
Greetings,See you later,Até logo,Hasta luego,À plus tard,Bis später,A dopo
Greetings,Bye,Tchau,Adiós,Au revoir,Tschüss,Ciao
Greetings,Welcome,Bem-vindo(a),Bienvenido(a),Bienvenue,Willkommen,Benvenuto(a)
Greetings,Cheers!,Saúde!,¡Salud!,Santé!,Prost!,Salute!
</textarea>

<div id="output"></div>

<script>
// Função simples para parsear CSV
function parseCSV(text) {
  const lines = text.trim().split('\n');
  const result = lines.map(line => {
    const values = [];
    let insideQuotes = false;
    let value = '';
    for (let char of line) {
      if (char === '"') insideQuotes = !insideQuotes;
      else if (char === ',' && !insideQuotes) {
        values.push(value);
        value = '';
      } else {
        value += char;
      }
    }
    values.push(value);
    return values;
  });
  return result;
}




    function buildTables(data) {
  const headers = data[0].slice(1);
  const grouped = {};

  for (let i = 1; i < data.length; i++) {
    const row = data[i];
    const categoria = row[0];
    if (!grouped[categoria]) grouped[categoria] = [];
    grouped[categoria].push(row.slice(1));
  }

  const container = document.getElementById('output');
  container.innerHTML = '';

  // Exemplo simplificado do mapa de áudio para Greetings (complete conforme seus arquivos)
  const audioMap = {
    "Greetings": {
      0: "Greetings_1.mp3",
      1: "Greetings_2.mp3",
      2: "Greetings_3.mp3",
      3: "Greetings_4.mp3",
      4: "Greetings_5.mp3",
      5: "Greetings_6.mp3",
      6: "Greetings_7.mp3",
      7: "Greetings_8.mp3",
      8: "Greetings_9.mp3",
      9: "Greetings_10.mp3"
    }
  };


  const h1 = document.createElement('h1');
  h1.textContent = '100 Useful Travel Phrases';
  container.appendChild(h1);

  for (const categoria in grouped) {
    const frases = grouped[categoria];

    const h2 = document.createElement('h2');
    h2.textContent = categoria;
    container.appendChild(h2);

    const wrapper = document.createElement('div');
    wrapper.className = 'table-wrapper';

    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const trHead = document.createElement('tr');

    headers.forEach(h => {
      const th = document.createElement('th');
      th.textContent = h;
      trHead.appendChild(th);
    });
    thead.appendChild(trHead);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    frases.forEach((frase, fraseIndex) => {
      const tr = document.createElement('tr');
      frase.forEach((texto, idx) => {
        const td = document.createElement('td');
        td.textContent = texto;
        td.style.cursor = 'pointer';

        td.addEventListener('click', () => {
          const idioma = headers[idx]; // ex: "English", "German" etc.
          const arquivoAudio = audioMap[categoria] && audioMap[categoria][fraseIndex];
          if (!arquivoAudio) {
            alert('Áudio não encontrado para esta frase.');
            return;
          }
          const audioPath = `${idioma}/${arquivoAudio}`;
          const audio = new Audio(audioPath);
          audio.play().catch(err => console.error('Erro ao tocar áudio:', err));
        });

        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);

    wrapper.appendChild(table);
    container.appendChild(wrapper);
  }
}

const csvText = document.getElementById('csvData').value;
const data = parseCSV(csvText);
buildTables(data);
</script>